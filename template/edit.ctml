<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Plaster</title>
    <link rel="stylesheet" type="text/css" href="../static/plaster.css" @href="/static/plaster/plaster.css" />
  </head>
  <body>
    <header>
      <h1>Plaster</h1>
      <nav>
        <a href="#" @href="plaster/edit">New</a>
        <a href="#" @href="plaster/list">List</a>
      </nav>
    </header>
    <main>
      <c:when test="error">
        <div class="infobox" id="error" lquery="(text error)">ERROR</div>
      </c:when>
      <c:when test="message">
        <div class="infobox" id="message" lquery="(text message)">MESSAGE</div>
      </c:when>
      <c:using value="paste">
        <form class="edit" method="post" action="#">
          <header>
            <input type="text" name="title" placeholder="Untitled" maxlength="32" lquery="(val title)" />
          </header>
          <textarea name="text" placeholder="Paste something here" autofocus required lquery="(text text)"></textarea>
          <nav class="actions">
            <input type="hidden" name="id" lquery="(val _id)" />
            <input type="hidden" name="browser" value="true" />
            <input type="hidden" name="parent" lquery="(val (** :parent))" />
            <c:if test="(or (** :repaste) (dm:hull-p *))">
              <c:then>
                <input type="submit" @formaction="/api/plaster/new" value="Post" />
              </c:then>
              <c:else>
                <input type="submit" @formaction="/api/plaster/delete" value="Delete" />
                <input type="submit" @formaction="/api/plaster/edit" value="Save" />
              </c:else>
            </c:if>
          </nav>
        </form>
      </c:using>
    </main>
    <footer>
    </footer>
  </body>
</html>
