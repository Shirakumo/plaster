<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Plaster</title>
    <link rel="stylesheet" type="text/css" href="../static/plaster.css" @href="/static/plaster/plaster.css" />
  </head>
  <body>
    <header>
      <h1>Plaster</h1>
      <nav>
        <c:when test="(plaster::permitted :new)">
          <a href="#" @href="plaster/edit">New</a>
        </c:when>
        <c:when test="(plaster::permitted :list)">
          <a href="#" @href="plaster/list">List</a>
        </c:when>
      </nav>
    </header>
    <main>
      <c:using value="paste">
        <form class="edit">
          <header>
            <input type="text" name="title" placeholder="Untitled" maxlength="32" readonly
                   lquery="(val title)" />
            <a rel="author" lquery="(text author)">AUTHOR</a>
            <time lquery="(time time)">2106.10.23</time>
          </header>
          <textarea name="text" placeholder="Paste something here" readonly
                    lquery="(text text)"></textarea>
          <nav class="actions">
            <c:when test="(plaster::permitted :new)">
              <a href="#" @href="plaster/edit?annotate={0}&password={1} _id (** :password)">Annotate</a>
              <a href="#" @href="plaster/edit/{0}?repaste&password={1} _id (** :password)">Repaste</a>
            </c:when>
            <c:when test="(plaster::permitted :edit *)">
              <a href="#" @href="plaster/edit/{0}?password={1} _id (** :password)">Edit</a>
            </c:when>
          </nav>
        </form>
      </c:using>
      <c:when test="annotations">
        <section id="annotations">
          <h2>Annotations</h2>
          <ul iterate="annotations">
            <li>
              <form class="edit" lquery="(attr :id _id)">
                <header>
                  <input type="text" name="title" placeholder="Untitled" maxlength="32" readonly
                         lquery="(val title)" />
                  <a rel="author" lquery="(text author)">AUTHOR</a>
                  <time lquery="(time time)">2106.10.23</time>
                </header>
                <textarea name="text" placeholder="Paste something here" readonly
                          lquery="(text text)"></textarea>
                <nav class="actions">
                  <c:when test="(plaster::permitted :new)">
                    <a href="#" @href="plaster/edit/{0}?repaste&password={1} _id (** :password)">Repaste</a>
                  </c:when>
                  <c:when test="(plaster::permitted :edit *)">
                    <a href="#" @href="plaster/edit/{0}?password={1} _id (** :password)">Edit</a>
                  </c:when>
                </nav>
              </form>
            </li>
          </ul>
        </section>
      </c:when>
    </main>
    <footer>
    </footer>
  </body>
</html>
